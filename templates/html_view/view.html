{% extends "header.html" %}
{% block title %}{{ page.title }}{% endblock %}

{% block content %}
<style>
    /* 添加按钮样式 */
    .btn {
        display: inline-block;
        padding: 8px 15px;
        background-color: #4a6fa5;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin-right: 10px;
        border: none;
        cursor: pointer;
        font-size: 14px;
    }
    
    .btn:hover {
        background-color: #3a5a8c;
    }
    
    .view-options {
        margin: 15px 0;
        padding: 10px;
        background-color: #f5f5f5;
        border-radius: 4px;
    }
    
    /* 响应式调整 */
    @media (max-width: 768px) {
        .view-options {
            display: flex;
            flex-direction: column;
        }
        
        .btn {
            margin-bottom: 10px;
            width: 100%;
            text-align: center;
        }
    }
</style>
<div class="viewer">
    <h2>{{ page.title }}</h2>
    
    <!-- 显示原始HTML的选项 -->
    <div class="view-options">
        <a href="{{ url_for('html_raw_page', page_id=page.id) }}" target="_blank" class="btn">
            在新标签页打开原始页面
        </a>
        
        <button onclick="openPreview()" class="btn">
            在页面内预览
        </button>
    </div>
    
    <!-- 预览容器 -->
    <div id="preview-container" style="display:none; margin-top:20px;">
        <iframe id="preview-frame" 
                src="{{ url_for('html_raw_page', page_id=page.id) }}" 
                style="width:100%; height:70vh; border:1px solid #ddd; border-radius:5px;">
        </iframe>
        <button onclick="closePreview()" class="btn" style="margin-top:10px;">关闭预览</button>
    </div>
    
    <a href="{{ url_for('html_index') }}" class="btn">返回列表</a>
</div>

<script>
    function openPreview() {
        document.getElementById('preview-container').style.display = 'block';
        document.getElementById('preview-frame').contentWindow.location.reload(true);
    }
    
    function closePreview() {
        document.getElementById('preview-container').style.display = 'none';
    }
</script>
{% endblock %}